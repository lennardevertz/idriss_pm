System: Confidence-Based Prediction Market with UMA-Verified Sources

Overview
This system enables anyone to spin up a topic (identified by a URL or unique string)
and submit sources (e.g. articles, datasets, tweets, images) about that topic via UMA’s
optimistic oracle. Concurrently, users stake an ERC20 token ABC in a confidence submission window
to submit real-time confidence scores on-chain.
At topic close, the contract aggregates all confidence scores into a mean ± σ band
and immediately rewards or slashes participants based on whether their scores fall inside
or outside that band.

Actors

    - User: Submits source and confidence levels.
    - UMA Oracle: Verifies whether the submitted source exists (via an optimistic assertion).
    - Smart Contract: Handles confidence submissions, calculates statistics, and performs payouts/slashing.
    - System Backend: Handles auxiliary logic like submission timestamps and confidence weighting.

Flow:

1. Topics & Phase 0 (Source Submission):
   - Anyone can create a topic. Anyone can submit a source to that topic via UMA’s
     optimistic oracle (using default bond size & liveness from UMA).
   - Phase 0 runs for the full topic duration. All assertions (including disputed ones)
     are visible on-chain in real time.

2. Phase 1 (Confidence Submission):
   - Runs concurrently with Phase 0. Users stake ABC and submit a confidence score (%).
   - Each submission is timestamped on-chain for weighting.

3. Phase 2 & 3 (Aggregation & Settlement):
   - At topic end, the contract computes mean and σ over all valid scores.
   - Users inside the band earn a pro-rata share of slashed stakes (based on stake size & submission time).
   - Users outside the band are slashed by a fixed %.
   - Settlement is performed on-chain; no UMA DVM or OO calls are needed beyond source visibility.

3. Aggregation (post-deadline):
   - Once the submission window ends:
     - Compute mean and standard deviation of all valid confidence scores.
     - Earlier submissions may be weighted more.
     - Define a “confidence band” (e.g. ±1σ around mean).

4. Payout & Slashing:
   - Based on the DPM's aggregated confidence band (mean ± σ), `VotingV2` (the staking contract) determines if a user's submission was in-band or out-of-band.
   - Users inside the band are eligible for rewards. Rewards are a pro-rata share of tokens from out-of-band users.
   - Users outside the band have a portion of their staked ABC (for that topic) accounted for as slashed within `VotingV2`.
   - This accounting happens lazily when a user's trackers are updated in `VotingV2`. The DPM itself does not handle ABC token transfers for rewards/slashes.
   - `VotingV2`'s reward calculation logic can incorporate time-weighting to discourage last-minute band-chasing.

Key Mechanics

    - UMA is only used for source collection via the optimistic oracle. The confidence
      market (aggregation & settlement) is fully on-chain and does not call the DVM or OO.
    - Users must stake ABC in a global staking contract (`VotingV2`). While actively staked:
      • They may submit confidence scores on any topic. The DPM interaction is virtual; no ABC tokens are transferred to the DPM. The DPM trusts `VotingV2` regarding the stake amount associated with a submission.
      • Stakes earn pro-rata emissions per block (rate set by governance), managed by `VotingV2`.
      • For out-of-band submissions on a topic, a portion of the user's ABC stake committed to that topic is accounted as slashed within `VotingV2`. This accounting occurs when the user's trackers are updated.
      • These accounted-for "slashed" amounts form a pool within `VotingV2` that is then distributed as rewards to in-band stakers for that topic, pro-rata by their stake size & submission timestamp (logic within `VotingV2`).
      • Initiating an unstake triggers a 7-day cooldown during which that stake cannot submit scores or be withdrawn.
    - The contract emits view functions per topic: current phase, time remaining, submissions, and aggregates.
    - User share distribution data (from `bucketIds` and `shares`) is managed by the DPM. `VotingV2` tracks the total ABC amount staked per user per topic.
    - Confidence scores are aggregated automatically on-chain by the DPM to produce a mean and standard deviation.
    - `VotingV2`'s reward calculation logic can incorporate time-weighting to discourage last-minute band-chasing.

Governance & parameter configurability
    - Global governance sets protocol-wide defaults (e.g. UMA bond size, slashing %, emission rate).
    - Each topic creator can override per-topic parameters (e.g. topic duration).
    - All topics are fully decentralized: anyone may spawn a new topic with custom settings.
